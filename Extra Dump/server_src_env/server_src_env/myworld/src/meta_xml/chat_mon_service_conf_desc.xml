<?xml version="1.0" encoding="GBK" standalone="yes" ?>

<metalib tagsetversion="1" name="chat_mon_service" version="10" >

	<macro name="TORMSVR_STRING_LEN" value="256" />
	<macro name="TORM_MAX_CHANNEL" value="256" />
	<macro name="TORM_MAX_DBCONN" value="32" />
	<macro name="TORM_MAX_TABLE" value="128" />
	<macro name="TORM_MAX_DBMETALIB" value="128" />
	<macro name="TORM_MAX_CACHEMETA" value="128" />
	<macro name="TORM_MAX_RECORDS_NUM_PERSELECT" value="100" desc="单个select查询能检索出的记录行最大数目" />
	<macro name="TORM_MAX_CACHE_PERCENT_SYN_SCTMSLCT_RES" value="80" 
         desc="当将自定义查询条件中的记录添加的cache中时，如果cache使用比例超过此值时停止添加记录到cache中" />

	<struct name="TORMConnectDBInfo" version="10" desc="dbms server  info">
		<entry name="IDX" type="int" defaultvalue="1" />
		<entry name="MajorVersion" type="int" />
		<entry name="MinVersion" type="int" />
		<entry name="DBMSName" type="string" size="TORMSVR_STRING_LEN" defaultvalue="mysql" />
		<entry name="DBMSConnectionInfo" type="string" size="TORMSVR_STRING_LEN" defaultvalue="localhost" />
		<entry name="DBMSCurDatabaseName" type="string" size="TORMSVR_STRING_LEN" defaultvalue="testdb" />
		<entry name="DBMSUser" type="string" size="TORMSVR_STRING_LEN" defaultvalue="user" />
		<entry name="DBMSPassword" type="string" size="TORMSVR_STRING_LEN" defaultvalue="passwd" />
		<entry name="DBMSSock" type="string" size="TORMSVR_STRING_LEN" defaultvalue="/tmp/mysql.sock" />
	</struct>

	<macrosgroup name="SOAP_ENCODING_TYPE">
		<macro name="SOAP_ENCODING_TYPE_UTF8" value="0" desc="UTF8"/>
		<macro name="SOAP_ENCODING_TYPE_GBK" value="1" desc="GBK"/>
	</macrosgroup>

	<macro name="TCONND_NAME_LEN" value="32" />
	<macro name="TCONND_URL_LEN" value="128" />
	
	<struct name="ChatMonListener" version="10" >
		<entry name="Name" type="string" size="TCONND_NAME_LEN" defaultvalue="default" />
		<entry name="Url" type="string" size="TCONND_URL_LEN" defaultvalue="tcp://192.168.0.77:8020?reuse=1" />
		<entry name="SendBuff" type="int" defaultvalue="655360"/>
		<entry name="RecvBuff" type="int" defaultvalue="655360"/>
		<entry name="MaxIdle" type="int" defaultvalue="95"/>
		<entry name="Backlog" type="int" defaultvalue="20"/>
		<entry name="MaxNoAuthIdle" type="int" defaultvalue="3"/>
	</struct>

	<macro name="MAX_LOG_DB_CONN_NUM" value="128" />

	<struct name="ChatMonLogDBConnInfo" version="10" >
		<entry name="Name" type="string" size="TCONND_NAME_LEN" defaultvalue="world_3_10" />
		<entry name="Url" type="string" size="TCONND_URL_LEN" defaultvalue="udp://192.168.0.77:9320" />
	</struct>
	
	<struct name="chat_mon_serviceconf" version="10" >
		<entry name="SpawnIP" type="string" size="24" desc="spawn-fcgi绑定的IP地址" defaultvalue="0.0.0.0" />  
		<entry name="SpawnPort" type="int" desc="spawn-fcgi绑定的端口" defaultvalue="8010" />  
		<entry name="SpawnNum" type="int" desc="spawn-fcgi数量,绑定的端口为SpawnPort递增1" defaultvalue="1" /> 
		<entry name="FcgiWebServerIPList" type="string" size="512" desc="配置Fastcgi Web服务器的ip地址列表以逗号(,)分割,不在列表内的ip地址将被禁止访问,未设置则全部允许访问|FCGI_WEB_SERVER_ADDRS" defaultvalue="" />  
		<entry name="SoapEncoding" type="int" desc="soap输入输出编码格式" defaultvalue="SOAP_ENCODING_TYPE_UTF8" bindmacrosgroup="SOAP_ENCODING_TYPE" /> 
		<entry name="ChannelKeyStart" type="int" defaultvalue="0" />
		<entry name="HeartBeatInterval" type="int" defaultvalue="10" desc="heart beart 间隔秒数"/>	
		<entry name="DirtyWordFile" type="string" size="128" defaultvalue="../cfg/dirtyword.txt" />
		<entry name="DirtyWordMd5File" type="string" size="128" defaultvalue="../cfg/dirtyword.txt.md5" />
		<entry name="RoleDBMetaFile" type="string" size="128" desc="role_db_meta.tdr 路径" defaultvalue="../cfg/role_db_meta.tdr" /> 
		<entry name="ServiceDBInfo" type="TORMConnectDBInfo" desc="操作失败日志数据库"/>
		<entry name="Listener" type="ChatMonListener" />
		<entry name="ChatLogDBConnNum" type="int" defaultvalue="1" desc="连接tlog_db的数量" />
		<entry name="ChatMonLogDBConnInfo" type="ChatMonLogDBConnInfo" count="MAX_LOG_DB_CONN_NUM" refer="ChatLogDBConnNum" desc="连接tlog_db信息" />
	</struct>
	
	<struct name="chat_mon_servicerun_status" version="10" >
		<entry name="Res" type="int" />
	</struct>
	
</metalib>


