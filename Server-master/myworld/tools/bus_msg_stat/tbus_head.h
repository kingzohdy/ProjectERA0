/********************************************************************
**       This head file is generated by program,                   **
**            Please do not change it directly.                    **
********************************************************************/

#ifndef TBUS_HEAD_H
#define TBUS_HEAD_H


#ifndef TDR_METALIB_TBUSHEAD_VERSION 
#define TDR_METALIB_TBUSHEAD_VERSION 	1 /*version of metalib*/
#endif

#ifndef TDR_METALIB_TBUSHEAD_HASH 
#define TDR_METALIB_TBUSHEAD_HASH 	"aeb30c0c2e1f9d6fbae35c79aa09aff7" /*hash of metalib*/
#endif
/*   
 User Define Macros.   */

#define TBUS_FORWARD_MAX_ROUTE                   	32 	/*  */
#define TBUS_HEAD_MAX_LEN                        	255 	/* tbus头部消息网络编码后的最大长度 */
#define TBUS_HEAD_FLAG_WITH_ROUTE                	1 	/* 消息头部附带路由信息 */
#define TBUS_HEAD_FLAG_SYN                       	2 	/* 序列号同步数据包 */
#define TBUS_HEAD_FLAG_TACE                      	4 	/* 染色消息，需进行跟踪 */
#define TBUS_HEAD_FLAG_WITH_ACK                  	8 	/* 标识位表示数据包中捎带了接收数据包的序列号 */
#define TBUS_HEAD_FLAG_COUNTERFEIT_DATA          	16 	/* 此标志位表示当前数据包只是为了方便tbus处理而伪造的消息包 */
#define TBUS_SYNFLAG_NO_RECV                     	1 	/* 之前还没有接收到数据包 */
#define TBUS_SUNFLAG_CONTINUE_RECV               	2 	/* 之前已经有接收到数据包 */

/* TbusHeadCmds*/
enum tagTbusHeadCmds 
{
    TBUS_HEAD_CMD_TRANSFER_DATA = 0, 	/* 转发数据命令S */
    TBUS_HEAD_CMD_ACKSEQ = 1, 	/* 同步命令：数据传输过程中接收序列号确认包 */
    TBUS_HEAD_CMD_HANDSHAKE_CLI_SYN = 2, 	/* 握手命令：客户端发起的SYN包，向对方提供接受包的序列号 */
    TBUS_HEAD_CMD_HANDSHAKE_SVR_SYN_ACK = 3, 	/* 握手命令：svr受到SYN包后，向对方提供接受包的序列号和发送数据包的序列号 */
    TBUS_HEAD_CMD_HANDSHAKE_CLI_ACK = 4, 	/* 握手命令：客户端收到SYN_ACK包后，向对方提供发送数据包的序列号 */
};


#ifdef __cplusplus
extern "C" {
#endif

/*   Define c types.   */


#ifndef TDR_CUSTOM_C_TYPES
#define TDR_CUSTOM_C_TYPES
#if defined(WIN32) &&  _MSC_VER < 1300
typedef __int64 tdr_longlong;
typedef unsigned __int64 tdr_ulonglong;
#else
typedef long long tdr_longlong;
typedef unsigned long long tdr_ulonglong;
#endif  /*defined(WIN32) &&  _MSC_VER < 1300*/
typedef unsigned short tdr_wchar_t;  /**<Wchar基本数据类型*/
typedef unsigned int tdr_date_t;	/**<data基本数据类型*/
typedef unsigned int tdr_time_t;	/**<time基本数据类型*/
typedef tdr_ulonglong tdr_datetime_t;  /**<datetime基本数据类型*/
typedef unsigned long int tdr_ip_t;  /**<IPv4数据类型*/
#endif /*TDR_CUSTOM_C_TYPES*/



/*   Structs/unions prototype.   */

struct tagTSynHeadExt;
typedef struct tagTSynHeadExt                      	TSYNHEADEXT;
typedef struct tagTSynHeadExt                      	*LPTSYNHEADEXT;

struct tagTDataHeadExt;
typedef struct tagTDataHeadExt                     	TDATAHEADEXT;
typedef struct tagTDataHeadExt                     	*LPTDATAHEADEXT;

union tagTheadExt;
typedef union  tagTheadExt                         	THEADEXT;
typedef union  tagTheadExt                         	*LPTHEADEXT;

struct tagTbusHead;
typedef struct tagTbusHead                         	TBUSHEAD;
typedef struct tagTbusHead                         	*LPTBUSHEAD;



/*   Define structs/unions.   */

#pragma pack(1)

struct tagTSynHeadExt
{
    unsigned char bSynFlag;                        	/*  Ver.1  */
    unsigned char bReserve;                        	/*  Ver.1  */
};

struct tagTDataHeadExt
{
    unsigned char bRoute;                          	/*   count of the route */
    char chIsDyed;                       
    int iDyedID;                        
    int routeAddr[TBUS_FORWARD_MAX_ROUTE];
};

union tagTheadExt
{
    TSYNHEADEXT stSynHead;                      
    TDATAHEADEXT stDataHead;                      	/* TBUS_HEAD_CMD_TRANSFER_DATA,   */
};

struct tagTbusHead
{
    unsigned char bVer;                           
    unsigned char bHeadLen;                       
    short nCheckSum;                      
    int iBodyLen;                       
    int iDst;                           
    int iSrc;                           
    int iSeq;                            	/*   在通常数据包包中，此字段存储数据包的序列号，在握手数据包中此字段存储发送数据包的序列号 */
    unsigned char bFlag;                           	/*   bit set: LOG_TRACE,TBUS_HEAD_FLAG_SYN  */
    unsigned char bCmd;                            	/*   存储令字段 */
    int iRecvSeq;                        	/*  Ver.1  */
    THEADEXT stExtHead;                      
};


#pragma pack()

#ifdef __cplusplus
}
#endif


#endif /* TBUS_HEAD_H */
